<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 TBD - Stationarity and Induction | Examining Algorithms</title>
  <meta name="description" content="Essays at the intersection of data science and philosophy - with code." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 TBD - Stationarity and Induction | Examining Algorithms" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Essays at the intersection of data science and philosophy - with code." />
  <meta name="github-repo" content="/NathanielF/NathanielF.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 TBD - Stationarity and Induction | Examining Algorithms" />
  
  <meta name="twitter:description" content="Essays at the intersection of data science and philosophy - with code." />
  

<meta name="author" content="Nathaniel Forde" />


<meta name="date" content="2021-11-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="decisions-and-expected-utility.html"/>
<link rel="next" href="tbd-causal-inference-and-counterfactuals.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.17/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-plugin-searchhighlight-1.10.20/source.css" rel="stylesheet" />
<script src="libs/dt-plugin-searchhighlight-1.10.20/jquery.highlight.js"></script>
<script src="libs/dt-plugin-searchhighlight-1.10.20/source.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<script src="assets/book.js"></script>
<meta property="og:image" content="https://nathanielf.github.io/img/flammiron_engraving.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://nathanielf.github.io/img/flammiron_engraving.jpg">
<meta name="twitter:title" content="Chapter 3 TBD - Stationarity and Induction | Examining Algorithms - Philosophy and Data Science">


<script>
/* ========================================================================
 * Bootstrap: transition.js v3.3.7
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      WebkitTransition : 'webkitTransitionEnd',
      MozTransition    : 'transitionend',
      OTransition      : 'oTransitionEnd otransitionend',
      transition       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // http://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false
    var $el = this
    $(this).one('bsTransitionEnd', function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()

    if (!$.support.transition) return

    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function (e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
      }
    }
  })

}(jQuery);
</script>
<script>
/* ========================================================================
 * Bootstrap: collapse.js v3.3.7
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* jshint latedef: false */

+function ($) {
  'use strict';

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +
                           '[data-toggle="collapse"][data-target="#' + element.id + '"]')
    this.transitioning = null

    if (this.options.parent) {
      this.$parent = this.getParent()
    } else {
      this.addAriaAndCollapsedClass(this.$element, this.$trigger)
    }

    if (this.options.toggle) this.toggle()
  }

  Collapse.VERSION  = '3.3.7'

  Collapse.TRANSITION_DURATION = 350

  Collapse.DEFAULTS = {
    toggle: true
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var activesData
    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')

    if (actives && actives.length) {
      activesData = actives.data('bs.collapse')
      if (activesData && activesData.transitioning) return
    }

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    if (actives && actives.length) {
      Plugin.call(actives, 'hide')
      activesData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')[dimension](0)
      .attr('aria-expanded', true)

    this.$trigger
      .removeClass('collapsed')
      .attr('aria-expanded', true)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')[dimension]('')
      this.transitioning = 0
      this.$element
        .trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element[dimension](this.$element[dimension]())[0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse in')
      .attr('aria-expanded', false)

    this.$trigger
      .addClass('collapsed')
      .attr('aria-expanded', false)

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .removeClass('collapsing')
        .addClass('collapse')
        .trigger('hidden.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }

  Collapse.prototype.getParent = function () {
    return $(this.options.parent)
      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
      .each($.proxy(function (i, element) {
        var $element = $(element)
        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
      }, this))
      .end()
  }

  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
    var isOpen = $element.hasClass('in')

    $element.attr('aria-expanded', isOpen)
    $trigger
      .toggleClass('collapsed', !isOpen)
      .attr('aria-expanded', isOpen)
  }

  function getTargetFromTrigger($trigger) {
    var href
    var target = $trigger.attr('data-target')
      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7

    return $(target)
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.collapse

  $.fn.collapse             = Plugin
  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
    var $this   = $(this)

    if (!$this.attr('data-target')) e.preventDefault()

    var $target = getTargetFromTrigger($this)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $this.data()

    Plugin.call($target, option)
  })

}(jQuery);
</script>
<script>
window.initializeCodeFolding = function(show) {

  // handlers for show-all and hide all
  $("#rmd-show-all-code").click(function() {
    $('div.r-code-collapse').each(function() {
      $(this).collapse('show');
    });
  });
  $("#rmd-hide-all-code").click(function() {
    $('div.r-code-collapse').each(function() {
      $(this).collapse('hide');
    });
  });

  // index for unique code element ids
  var currentIndex = 1;

  // select all R code blocks
  var rCodeBlocks = $('pre.sourceCode, pre.r, pre.python, pre.bash, pre.sql, pre.cpp, pre.stan');
  rCodeBlocks.each(function() {

    // create a collapsable div to wrap the code in
    var div = $('<div class="collapse r-code-collapse"></div>');
    if (show)
      div.addClass('in');
    var id = 'rcode-643E0F36' + currentIndex++;
    div.attr('id', id);
    $(this).before(div);
    $(this).detach().appendTo(div);

    // add a show code button right above
    var showCodeText = $('<span>' + (show ? 'Hide' : 'Code') + '</span>');
    var showCodeButton = $('<button type="button" class="btn btn-default btn-xs code-folding-btn pull-right"></button>');
    showCodeButton.append(showCodeText);
    showCodeButton
        .attr('data-toggle', 'collapse')
        .attr('data-target', '#' + id)
        .attr('aria-expanded', show)
        .attr('aria-controls', id);

    var buttonRow = $('<div class="row"></div>');
    var buttonCol = $('<div class="col-md-12"></div>');

    buttonCol.append(showCodeButton);
    buttonRow.append(buttonCol);

    div.before(buttonRow);

    // update state of button on show/hide
    div.on('hidden.bs.collapse', function () {
      showCodeText.text('Code');
    });
    div.on('show.bs.collapse', function () {
      showCodeText.text('Hide');
    });
  });

}
</script>
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
.row { display: flex; }
.collapse { display: none; }
.in { display:block }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-188850615-1', 'auto');
ga('send', 'pageview');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="assets/custom_style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://nathanielf.github.io/", style="font-size:20px">Examining Algorithms</a></li>
<li><a href="./", style="font-size:15px">Essays on Philosophy and Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html"><i class="fa fa-check"></i><b>2</b> Decisions and Expected Utility</a>
<ul>
<li class="chapter" data-level="2.1" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#average-man-and-rational-action"><i class="fa fa-check"></i><b>2.1</b> Average Man and Rational Action</a></li>
<li class="chapter" data-level="2.2" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#probability-dual-aspects"><i class="fa fa-check"></i><b>2.2</b> Probability: Dual Aspects</a></li>
<li class="chapter" data-level="2.3" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#small-worlds-and-statistical-inference"><i class="fa fa-check"></i><b>2.3</b> Small Worlds and Statistical Inference</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#modeling-improper-assumptions-and-skewed-expectations"><i class="fa fa-check"></i><b>2.3.1</b> Modeling: Improper Assumptions and Skewed Expectations</a></li>
<li class="chapter" data-level="2.3.2" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#frequentism-inference-from-expected-frequency"><i class="fa fa-check"></i><b>2.3.2</b> Frequentism: Inference from Expected Frequency</a></li>
<li class="chapter" data-level="2.3.3" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#bayes-rule-inference-to-expected-value"><i class="fa fa-check"></i><b>2.3.3</b> Bayes’ Rule: Inference to Expected Value</a></li>
<li class="chapter" data-level="2.3.4" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#example-website-traffic"><i class="fa fa-check"></i><b>2.3.4</b> Example: Website Traffic</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#utility-curves"><i class="fa fa-check"></i><b>2.4</b> Utility Curves</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#the-stakes-from-utility-to-indifference"><i class="fa fa-check"></i><b>2.4.1</b> The Stakes: From Utility to Indifference</a></li>
<li class="chapter" data-level="2.4.2" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#optimising-utility-with-constraints"><i class="fa fa-check"></i><b>2.4.2</b> Optimising Utility with Constraints</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#representation-theorems"><i class="fa fa-check"></i><b>2.5</b> Representation Theorems</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#rational-preference-from-indifference-to-utility"><i class="fa fa-check"></i><b>2.5.1</b> Rational Preference: From Indifference to Utility</a></li>
<li class="chapter" data-level="2.5.2" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#von-neumann-and-morgernsterns-representation-theorem"><i class="fa fa-check"></i><b>2.5.2</b> Von Neumann and Morgernstern’s Representation Theorem</a></li>
<li class="chapter" data-level="2.5.3" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#bolkers-representation-theorem"><i class="fa fa-check"></i><b>2.5.3</b> Bolker’s Representation Theorem</a></li>
<li class="chapter" data-level="2.5.4" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#from-neutrality-to-desire"><i class="fa fa-check"></i><b>2.5.4</b> From Neutrality to Desire</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#measures-of-latent-subjective-utility"><i class="fa fa-check"></i><b>2.6</b> Measures of Latent Subjective Utility</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="decisions-and-expected-utility.html"><a href="decisions-and-expected-utility.html#maximum-likelihood-estimation-and-multiple-choice"><i class="fa fa-check"></i><b>2.6.1</b> Maximum Likelihood Estimation and Multiple Choice</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tbd-stationarity-and-induction.html"><a href="tbd-stationarity-and-induction.html"><i class="fa fa-check"></i><b>3</b> TBD - Stationarity and Induction</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tbd-stationarity-and-induction.html"><a href="tbd-stationarity-and-induction.html#profiling-segmentation-and-expected-value"><i class="fa fa-check"></i><b>3.1</b> Profiling: Segmentation and Expected Value</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tbd-causal-inference-and-counterfactuals.html"><a href="tbd-causal-inference-and-counterfactuals.html"><i class="fa fa-check"></i><b>4</b> TBD - Causal Inference and Counterfactuals</a></li>
<li class="chapter" data-level="5" data-path="tbd-wisdom-of-the-crowds.html"><a href="tbd-wisdom-of-the-crowds.html"><i class="fa fa-check"></i><b>5</b> TBD - Wisdom of the Crowds</a></li>
<li class="chapter" data-level="6" data-path="tbd-ethical-considerations.html"><a href="tbd-ethical-considerations.html"><i class="fa fa-check"></i><b>6</b> TBD - Ethical Considerations</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Examining Algorithms</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<link href="custom_style.css" rel="stylesheet">
<div class="hero-image-container"> 
  <img class= "hero-image" src="assets/images/flammarion_engraving.jpg">
</div>
<div id="tbd---stationarity-and-induction" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> TBD - Stationarity and Induction</h1>
<div id="profiling-segmentation-and-expected-value" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Profiling: Segmentation and Expected Value</h2>
<p>There is a wide range of segmentation methods which can be applied to the task of classifying both customers and products, patients and treatments. These classification schemas are vital inputs for any recommendation algorithm. They cluster individuals based on a wide array of features, which is to say that they simplify the question of expected action.</p>
<p>Instead of asking how might Rebecca, (aged between 18-25, from Spain, with a history of frugal purchases) react to a new sales promotion, you can ask about the conversion rate of the young female demographic. Depending on the task and the nature of the clustering algorithm, you might end up bucketing Rebecca with Sven (overweight male, history of lavish spending from Sweden) if, for example, their historic email open rates were similar. The responsibility for vetting each clustering schema lies with the user of the algorithm, but usually knowledge of the problem is enough to put some kind of context on the structural patterns unearthed by the algorithm.</p>
<p>Ideally we would parse out our data into the most relevant descriptive features, but in lieu of domain knowledge we can apply some data compression techniques such as principle components analysis to extract latent features in the data. These techniques are dangerous when applied without domain knowledge or some kind of supervision. A technique, in the same vein as PCA, called factor analysis tries to construct latent factors from correlations in the observed features. Historically this was abused to measure “intelligence” as a latent factor driving performance on aptitude tests. So while we should be wary of over-inflating artefacts of the data, the technique is useful for finding structure.</p>
<div id="htmlwidget-dec88982d85c93d24b03" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-dec88982d85c93d24b03">{"x":{"filter":"none","data":[["1","2","3","4","5","6"],[-7.625,0.558,0.129,-6.948,6.561,5.932],[2.641,8.611,4.643,5.064,7.102,7.489],[-6.801,-10.002,2.942,-6.257,11.671,8.082],[7.631,-8.979,1.295,9.277,5.26,8.144],[0.635,-9.788,-0.564,0.172,-0.995,-0.339],[-0.374,5.377,2.838,-1.235,5.481,5.806],[4,2,0,4,3,3],[1814,7268,261,3351,8506,2658],[10.355,2.105,0.858,9.036,-7.17,-2.437],[-2.963,4.8,3.624,2.924,-1.978,-2.713],[5.593,2.827,2.722,1.659,5.555,4.246],[-0.3,1.927,0.437,-8.942,-8.377,-2.975],[2.06,-2.436,-2.861,-3.534,6.897,8.995],[7.451,2.494,1.571,-6.838,-6.831,-9.124],[-8.802,-0.386,-0.554,-4.795,9.634,-4.674],[-9.116,5.18,7.676,-9.006,-0.028,-6.495],[1,0,0,9,8,6],[149,470,465,974,789,178]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>product_desc_0<\/th>\n      <th>product_desc_1<\/th>\n      <th>product_desc_2<\/th>\n      <th>product_desc_3<\/th>\n      <th>product_desc_4<\/th>\n      <th>product_desc_5<\/th>\n      <th>Product_Class<\/th>\n      <th>Product_ID<\/th>\n      <th>customer_desc_0<\/th>\n      <th>customer_desc_1<\/th>\n      <th>customer_desc_2<\/th>\n      <th>customer_desc_3<\/th>\n      <th>customer_desc_4<\/th>\n      <th>customer_desc_5<\/th>\n      <th>customer_desc_6<\/th>\n      <th>customer_desc_7<\/th>\n      <th>Customer_Class<\/th>\n      <th>Customer_ID<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"lengthMenu":[5,10,25,50,100],"searchHighlight":true,"autoWidth":true,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]},{"orderable":false,"targets":0}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Starting from the covariance matrix of the scaled customer data :</p>
<p><span class="math display">\[ Cov(\mathbf{X}) = \operatorname{cov}[X_i, X_j] = \operatorname{E}[(X_i - \operatorname{E}[X_i])(X_j - \operatorname{E}[X_j])] \]</span> For any observed set of customer attributes, their covariance matrix can be factorized (or decomposed) into a matrix product of the eigenvectors and eigenvalues, allowing for the original dataset to represented in lower dimensions in terms of the principle components. These components can in turn be analysed to express the manner in which each of the original features contributes to the new construct. Each component captures a proportion of the total variance observed in the original covariance matrix. If we’re lucky, a small number of the eigenvectors (principle components) can be shown to explain the variance in the data and thereby represent a complex customer problem in a reduced dimensional space.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="tbd-stationarity-and-induction.html#cb20-1" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> df_customer[[x <span class="cf">for</span> x <span class="kw">in</span> df_purchases.columns </span>
<span id="cb20-2"><a href="tbd-stationarity-and-induction.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="st">&#39;customer_desc&#39;</span> <span class="kw">in</span> x]]</span>
<span id="cb20-3"><a href="tbd-stationarity-and-induction.html#cb20-3" aria-hidden="true" tabindex="-1"></a>X_std <span class="op">=</span> StandardScaler().fit_transform(X)</span>
<span id="cb20-4"><a href="tbd-stationarity-and-induction.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">## Covariance Decomposition</span></span>
<span id="cb20-5"><a href="tbd-stationarity-and-induction.html#cb20-5" aria-hidden="true" tabindex="-1"></a>cov_mat <span class="op">=</span> np.cov(X_std.T)</span>
<span id="cb20-6"><a href="tbd-stationarity-and-induction.html#cb20-6" aria-hidden="true" tabindex="-1"></a>eig_vals, eig_vecs <span class="op">=</span> np.linalg.eig(cov_mat)</span>
<span id="cb20-7"><a href="tbd-stationarity-and-induction.html#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="tbd-stationarity-and-induction.html#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">## Explained Variance</span></span>
<span id="cb20-9"><a href="tbd-stationarity-and-induction.html#cb20-9" aria-hidden="true" tabindex="-1"></a>tot <span class="op">=</span> <span class="bu">sum</span>(eig_vals)</span>
<span id="cb20-10"><a href="tbd-stationarity-and-induction.html#cb20-10" aria-hidden="true" tabindex="-1"></a>var_exp <span class="op">=</span> [(i <span class="op">/</span> tot)<span class="op">*</span><span class="dv">100</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">sorted</span>(eig_vals, reverse<span class="op">=</span><span class="va">True</span>)]</span>
<span id="cb20-11"><a href="tbd-stationarity-and-induction.html#cb20-11" aria-hidden="true" tabindex="-1"></a>cum_var_exp <span class="op">=</span> np.cumsum(var_exp)</span>
<span id="cb20-12"><a href="tbd-stationarity-and-induction.html#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="tbd-stationarity-and-induction.html#cb20-13" aria-hidden="true" tabindex="-1"></a>barh <span class="op">=</span> plt.bar(<span class="bu">range</span>(<span class="bu">len</span>(var_exp)), var_exp, alpha<span class="op">=</span><span class="fl">0.5</span>, align<span class="op">=</span><span class="st">&#39;center&#39;</span>,</span>
<span id="cb20-14"><a href="tbd-stationarity-and-induction.html#cb20-14" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="st">&#39;individual explained variance&#39;</span>)</span>
<span id="cb20-15"><a href="tbd-stationarity-and-induction.html#cb20-15" aria-hidden="true" tabindex="-1"></a>plt.step(<span class="bu">range</span>(<span class="bu">len</span>(cum_var_exp)), cum_var_exp, where<span class="op">=</span><span class="st">&#39;mid&#39;</span>,</span>
<span id="cb20-16"><a href="tbd-stationarity-and-induction.html#cb20-16" aria-hidden="true" tabindex="-1"></a>         label<span class="op">=</span><span class="st">&#39;cumulative explained variance&#39;</span>)</span>
<span id="cb20-17"><a href="tbd-stationarity-and-induction.html#cb20-17" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Explained variance ratio&#39;</span>)</span>
<span id="cb20-18"><a href="tbd-stationarity-and-induction.html#cb20-18" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Principal components&#39;</span>)</span>
<span id="cb20-19"><a href="tbd-stationarity-and-induction.html#cb20-19" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">&#39;best&#39;</span>)</span>
<span id="cb20-20"><a href="tbd-stationarity-and-induction.html#cb20-20" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb20-21"><a href="tbd-stationarity-and-induction.html#cb20-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-26-1.png" width="1152" /></p>
<p>Each customer can then be visualised as a complex of observed characteristics along the axes of the principle components in, for example, a two dimensional plane. In our case we saw that the two components account for around 60% of the total variance. Furthermore, we can overlay an interpretation on the components by associating group identifiers to portions of the plane.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="tbd-stationarity-and-induction.html#cb21-1" aria-hidden="true" tabindex="-1"></a>kmeans <span class="op">=</span> KMeans(init<span class="op">=</span><span class="st">&#39;k-means++&#39;</span>, n_clusters<span class="op">=</span><span class="dv">3</span>, n_init<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb21-2"><a href="tbd-stationarity-and-induction.html#cb21-2" aria-hidden="true" tabindex="-1"></a>kfit <span class="op">=</span> kmeans.fit(X)</span>
<span id="cb21-3"><a href="tbd-stationarity-and-induction.html#cb21-3" aria-hidden="true" tabindex="-1"></a>clusters <span class="op">=</span> kmeans.predict(X)</span>
<span id="cb21-4"><a href="tbd-stationarity-and-induction.html#cb21-4" aria-hidden="true" tabindex="-1"></a>X[<span class="st">&#39;cluster&#39;</span>] <span class="op">=</span> clusters</span>
<span id="cb21-5"><a href="tbd-stationarity-and-induction.html#cb21-5" aria-hidden="true" tabindex="-1"></a>sklearn_pca <span class="op">=</span> sklearnPCA(n_components<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb21-6"><a href="tbd-stationarity-and-induction.html#cb21-6" aria-hidden="true" tabindex="-1"></a>Y_pca <span class="op">=</span> pd.DataFrame(sklearn_pca.fit_transform(X[[col <span class="cf">for</span> col <span class="kw">in</span> X.columns <span class="cf">if</span></span>
<span id="cb21-7"><a href="tbd-stationarity-and-induction.html#cb21-7" aria-hidden="true" tabindex="-1"></a>                                         <span class="kw">not</span> <span class="st">&#39;cluster&#39;</span> <span class="kw">in</span> col]]))</span>
<span id="cb21-8"><a href="tbd-stationarity-and-induction.html#cb21-8" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> pd.concat([X, Y_pca], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb21-9"><a href="tbd-stationarity-and-induction.html#cb21-9" aria-hidden="true" tabindex="-1"></a>X[[<span class="dv">0</span>, <span class="dv">1</span>, <span class="st">&#39;cluster&#39;</span>]].plot.scatter(x<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb21-10"><a href="tbd-stationarity-and-induction.html#cb21-10" aria-hidden="true" tabindex="-1"></a>                      y<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb21-11"><a href="tbd-stationarity-and-induction.html#cb21-11" aria-hidden="true" tabindex="-1"></a>                      c<span class="op">=</span><span class="st">&#39;cluster&#39;</span>,</span>
<span id="cb21-12"><a href="tbd-stationarity-and-induction.html#cb21-12" aria-hidden="true" tabindex="-1"></a>                      colormap<span class="op">=</span><span class="st">&#39;viridis&#39;</span>)</span>
<span id="cb21-13"><a href="tbd-stationarity-and-induction.html#cb21-13" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Principle Components Representation - Coloured by inferred Clusters&quot;</span>)</span>
<span id="cb21-14"><a href="tbd-stationarity-and-induction.html#cb21-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Principle Component 1&quot;</span>)</span>
<span id="cb21-15"><a href="tbd-stationarity-and-induction.html#cb21-15" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Principle Component 2&quot;</span>)</span>
<span id="cb21-16"><a href="tbd-stationarity-and-induction.html#cb21-16" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-27-1.png" width="1152" /></p>
<p>In the dataset pictured in we’ve tried to represent the data in three groups inferred by a k-means clustering algorithm over the original observed features. This is not the most appropriate categorisation as can be seen by the manner in which 9 clear cohorts are speckled across the space. In other words there is more diversity in our customer base than the clustering is capable of expressing. That’s not to say all diversity needs to be captured. If our purpose is make the broadly correct action (e.g. sell, promote, no-action), the niceties can often be ignored. The principle components can be interpreted as linear weightings of the original customer descriptions, and some understanding of those observable features is required to assess if the principle component representation is sensble.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="tbd-stationarity-and-induction.html#cb22-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb22-2"><a href="tbd-stationarity-and-induction.html#cb22-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.heatmap(sklearn_pca.components_,</span>
<span id="cb22-3"><a href="tbd-stationarity-and-induction.html#cb22-3" aria-hidden="true" tabindex="-1"></a>                 cmap<span class="op">=</span><span class="st">&#39;YlGnBu&#39;</span>,</span>
<span id="cb22-4"><a href="tbd-stationarity-and-induction.html#cb22-4" aria-hidden="true" tabindex="-1"></a>                 yticklabels<span class="op">=</span>[ <span class="st">&quot;PCA&quot;</span><span class="op">+</span><span class="bu">str</span>(x) <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,sklearn_pca.n_components_<span class="op">+</span><span class="dv">1</span>)],</span>
<span id="cb22-5"><a href="tbd-stationarity-and-induction.html#cb22-5" aria-hidden="true" tabindex="-1"></a>  xticklabels<span class="op">=</span>[<span class="st">&#39;customer_desc_0&#39;</span>, <span class="st">&#39;customer_desc_1&#39;</span>, <span class="st">&#39;customer_desc_2&#39;</span>,</span>
<span id="cb22-6"><a href="tbd-stationarity-and-induction.html#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;customer_desc_3&#39;</span>, <span class="st">&#39;customer_desc_4&#39;</span>, <span class="st">&#39;customer_desc_5&#39;</span>,</span>
<span id="cb22-7"><a href="tbd-stationarity-and-induction.html#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;customer_desc_6&#39;</span>, <span class="st">&#39;customer_desc_7&#39;</span>],</span>
<span id="cb22-8"><a href="tbd-stationarity-and-induction.html#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#cbar_kws={&quot;orientation&quot;: &quot;horizontal&quot;}</span></span>
<span id="cb22-9"><a href="tbd-stationarity-and-induction.html#cb22-9" aria-hidden="true" tabindex="-1"></a>  ax<span class="op">=</span>ax)</span>
<span id="cb22-10"><a href="tbd-stationarity-and-induction.html#cb22-10" aria-hidden="true" tabindex="-1"></a>ax.set_aspect(<span class="st">&quot;equal&quot;</span>)</span>
<span id="cb22-11"><a href="tbd-stationarity-and-induction.html#cb22-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Component Weightings of the original observable variables&quot;</span>)</span>
<span id="cb22-12"><a href="tbd-stationarity-and-induction.html#cb22-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-28-1.png" width="960" /></p>
<p>Couple this with a Silhouette score analysis of the clustering and we can see that our classes is too crude, collecting dissimilar customers together. A high silhouette score (closer to 1) would indicate that our clustering has captured the similar customers well. As it stands, we should probably go back to the drawing board.</p>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-29-1.png" width="1152" /></p>
<p>The expected value of the customer is then something like the probability of purchase (however approximated) for the given customer multiplied by the net revenue of the average purchase in the same group. It’s these kind of idealisations and conceptual economies, which seemingly reasonable at the time, lead to systematic algorithmic skew. Unrefined constructs encourage brutish bulk actions across the arrayed field of customers. The same kind of concerns apply in the treatment of schizophrenic patients. They’re seperated out by crass groupings into high-functioning and other.</p>
<blockquote>
<p>…emploment remains the primary marker of someone who is high functioning, as having a job is the most reliable sign that you can pass in the world as normal. Most critically, a capitalist society values productivity in its citizens above all else, and those with severe mental illness are much less likely to be productive in ways considered valuable: by adding to cycle of production and profit. pg51 in <span class="citation">(<a href="references.html#ref-WangSchizophrenia" role="doc-biblioref">Wang 2019</a>)</span></p>
</blockquote>
<p>This drive to categorisation serves a dual role. It’s diagnostically relevant but also useful as it allows us to measure the impact of broad classes of people on the financial bottom line. But it shouldn’t be forgotten that these profiles are often complex constructs abstracted from contingent or limited data.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="decisions-and-expected-utility.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tbd-causal-inference-and-counterfactuals.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.epub", "bookdown-demo.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
